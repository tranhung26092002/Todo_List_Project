<!DOCTYPE html>
<html>
  <head>
    <title>Trang web bán đồ uống</title>
    <link rel="stylesheet" href="css/drink_page.css">
  </head>
  <body>
    <header>
      <h1>Đồ uống ngon</h1>
      <nav>
        <ul>
          <li><a href="#">Trang chủ</a></li>
          <li><a href="#">Sản phẩm</a></li>
          <li><a href="#">Giới thiệu</a></li>
          <li><a href="#">Liên hệ</a></li>
        </ul>
      </nav>
    </header>
    <main>
      <section class="product">
        <h2>Trà sữa</h2>
        <img src="https://sieuthimaycafe.vn/uploads/product/1602815572_1584608887_do-uong-highland-ngon.jpg" alt="Trà sữa">
        <p>Giá: 30.000 đồng</p>
        <button onclick="addToCart('Trà sữa', 30000)">Mua ngay</button>
      </section>
      <section class="product">
        <h2>Nước ép trái cây</h2>
        <img src="https://thuviendohoa.vn/2020/upload/images/items/hinh-anh-nuoc-ep-hoa-qua-trai-cay-tuoi-4049.jpg?t=20170502_031126" alt="Nước ép trái cây">
        <p>Giá: 25.000 đồng</p>
        <button onclick="addToCart('Nước ép trái cây', 25000)">Mua ngay</button>
      </section>
      <section class="product">
        <h2>Cà phê đen</h2>
        <img src="https://websitecukcukvn.misacdn.net/wp-content/uploads/2022/11/PHINDI_Choco-min.png" alt="Cà phê đen">
        <p>Giá: 20.000 đồng</p>
        <button onclick="addToCart('Cà phê đen', 20000)">Mua ngay</button>
      </section>
      <section class="product">
        <h2>Trà chanh</h2>
        <img src="https://icon2.cleanpng.com/20180215/ske/kisspng-lemonade-drink-milk-tea-a-cup-of-frozen-lemon-tea-5a861bfcea8a10.1737825415187384289607.jpg" alt="Trà Chanh "
        <p>Giá: 15.000 đồng</p>
        <button onclick="addToCart('Trà chanh', 15000)">Mua ngay</button>
      </section>
      <section class="product">
        <h2>Latte</h2>
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTptnJ18ttn5W31q8jPnAWSCmw_JwQWAl2Xjg&usqp=CAU" alt="Latte">
        <p>Giá: 35.000 đồng</p>
        <button onclick="addToCart('Latte', 35000)">Mua ngay</button>
      </section>
      <section class="product">
        <h2>Nước suối</h2>
        <img src="https://sonhawater.com/wp-content/uploads/2019/10/aquafina-500ml-300x300.jpg" alt="Nước suối">
        <p>Giá: 10.000 đồng</p>
        <button onclick="addToCart('Nước suối', 10000)">Mua ngay</button>
      </section>
    </main>
    <aside>
      <h2>Giỏ hàng</h2>
      <ul id="cart"></ul>
      <p>Tổng tiền: <span id="total">0</span> đồng</p>
      <button onclick="checkout()">Thanh toán</button>
    </aside>
    <footer>
      <p>Bản quyền © 2023 Đồ uống ngon</p>
    </footer>
    <script >
      let cart = [];
      function addToCart(name, price) {
  // Tìm sản phẩm trong giỏ hàng bằng tên
  let product = cart.find(item => item.name === name);
  if (product) {
    // Nếu sản phẩm đã có trong giỏ hàng, tăng số lượng lên 1
    product.quantity += 1;
  } else {
    // Nếu sản phẩm chưa có trong giỏ hàng, thêm sản phẩm vào giỏ hàng
    cart.push({ name: name, price: price, quantity: 1 });
  }
  // Cập nhật giỏ hàng trên giao diện
  renderCart();
}
function renderCart() {
  let cartElement = document.getElementById("cart");
  cartElement.innerHTML = ""; // Xóa hết các phần tử trong giỏ hàng trên giao diện
  let total = 0;
  // Duyệt qua các sản phẩm trong giỏ hàng
  for (let item of cart) {
    let itemElement = document.createElement("li");
    itemElement.innerText = `${item.name} x ${item.quantity} = ${item.price * item.quantity} đồng`;
    cartElement.appendChild(itemElement);
    total += item.price * item.quantity;
  }
  // Hiển thị tổng tiền trên giao diện
  let totalElement = document.getElementById("total");
  totalElement.innerText = total;
  
}
window.onload = function() {
  renderCart();
};

function checkout() {
  var cartList = document.getElementById("cart").children;
  var total = 0;
  var items = [];

  // Tính tổng tiền và lấy danh sách sản phẩm
  for (var i = 0; i < cartList.length; i++) {
    var item = {};
    item.name = cartList[i].dataset.name;
    item.price = parseInt(cartList[i].dataset.price);
    total += item.price;
    items.push(item);
  }

  // Hiển thị cửa sổ thông báo xác nhận thanh toán
  let message =`Bạn có chắc chắn muốn thanh toán cho các sản phẩm sau đây?\n\n`;
 
  let confirmCheckout = confirm(message);
  console.log(confirm)
 
  // Nếu người dùng xác nhận thanh toán, xóa danh sách sản phẩm và reset tổng tiền
  if (confirmCheckout) {
    alert("Thanh toán thành công!");
  }
}
    </script>
  </body>
</html>